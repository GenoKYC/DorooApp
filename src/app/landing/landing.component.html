<link
  href="https://cdn.jsdelivr.net/npm/daisyui@5"
  rel="stylesheet"
  type="text/css"
/>
<script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>

<div
  class="min-h-screen bg-[#000000] text-white p-4 sm:p-6 md:p-8 flex flex-col justify-between"
>
  <div class="mx-auto px-4 sm:px-8 md:px-16">
    <header class="p-4 sm:p-6 md:p-10 mb-5 flex flex-wrap items-center justify-between gap-4">
      <!-- Left side -->
      <div class="max-w-[500px]">
        <h1 class="text-4xl sm:text-5xl md:text-6xl font-bold pt-4 text-[#DFDEDE]">Doroo</h1>
        <p class="text-base sm:text-lg md:text-xl mt-2 text-[#DFDEDE]">Focus on what matters</p>
      </div>

      <!-- Right side: profile icon with dropdown -->
      <div class="dropdown dropdown-end">
        <div
          tabindex="0"
          role="button"
          class="text-[#DFDEDE] hover:text-white cursor-pointer"
        >
          <!-- Profile Icon -->
          <svg
            xmlns="http://www.w3.org/2000/svg"
            fill="none"
            viewBox="0 0 24 24"
            stroke-width="1.5"
            stroke="currentColor"
            class="w-8 h-8"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              d="M17.982 18.725A7.488 7.488 0 0 0 12 15.75a7.488 7.488 0 0 0-5.982 
             2.975m11.963 0a9 9 0 1 0-11.963 0m11.963 
             0A8.966 8.966 0 0 1 12 21a8.966 8.966 0 0 
             1-5.982-2.275M15 9.75a3 3 0 1 1-6 
             0 3 3 0 0 1 6 0Z"
            />
          </svg>
        </div>

        <!-- Dropdown menu -->
        <ul
          tabindex="0"
          class="dropdown-content menu p-2 shadow rounded-box w-52 bg-[#3B3735] text-[#DFDEDE]"
        >
          <li><a class="hover:bg-[#4A4543]" href="/login">Profile</a></li>
          <li><a class="hover:bg-[#4A4543]" href="/login">Settings</a></li>
          <li><a class="hover:bg-[#4A4543]" href="/login">Logout</a></li>
        </ul>
      </div>
    </header>

    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 md:gap-8">
      <!-- Left: Work Timer -->
      <section class="flex flex-col h-full items-center">
        <h2 class="text-3xl font-bold mb-4 text-[#DFDEDE]">Work</h2>

        <div class="pt-3 bg-[rgb(59,56,56)] w-full max-w-xs sm:max-w-sm md:max-w-md h-auto md:h-[270px] rounded-lg">
          <!-- Pomodoro Mode Buttons -->
          <div
            class="flex gap-2 mb-4 justify-center bg-[#000000] w-full max-w-[260px] sm:max-w-xs md:max-w-sm mx-auto text-xs font-bold text-[#696363] rounded-lg p-1"
          >
            <button
              (click)="changeMode('pomodoro')"
              [ngClass]="{
                'bg-[#1d1d1d] text-[#DFDEDE]': currentMode === 'pomodoro'
              }"
              class="flex-1 px-3 py-3 rounded-md transition-all ease-in-out hover:bg-[#1d1d1d] hover:text-[#DFDEDE] shadow-md hover:shadow-lg hover:scale-105 duration-200"
            >
              Pomodoro
            </button>
            <button
              (click)="changeMode('short')"
              [ngClass]="{
                'bg-[#1d1d1d] text-[#DFDEDE]': currentMode === 'short'
              }"
              class="flex-1 px-3 py-3 rounded-md transition-all ease-in-out hover:bg-[#1d1d1d] hover:text-[#DFDEDE] shadow-md hover:shadow-lg hover:scale-105 duration-200"
            >
              Short Break
            </button>
            <button
              (click)="changeMode('long')"
              [ngClass]="{
                'bg-[#1d1d1d] text-[#DFDEDE]': currentMode === 'long'
              }"
              class="flex-1 px-3 py-3 rounded-md transition-all ease-in-out hover:bg-[#1d1d1d] hover:text-[#DFDEDE] shadow-md hover:shadow-lg hover:scale-105 duration-200"
            >
              Long Break
            </button>
          </div>

          <!-- Timer Display -->
          <div class="text-5xl sm:text-6xl md:text-8xl font-bold text-center mb-4 py-2">
            {{ formattedTime }}
          </div>

          <!-- Timer Controls -->
          <div class="flex justify-center gap-4 pt-3">
            <button
              (click)="startOrPauseTimer()"
              [ngClass]="
                isRunning
                  ? 'bg-[#7A7575] hover:bg-[#8A8585]'
                  : 'bg-[#5E5A5A] hover:bg-[#6A6666]'
              "
              class="px-6 py-2 rounded-md text-white font-semibold tracking-wide transition-all duration-300 focus:outline-none"
            >
              {{ isRunning ? "Pause" : "Start" }}
            </button>

            <button
              (click)="resetTimer()"
              class="px-6 py-2 rounded-md bg-[#4C4848] text-[#DFDEDE] font-semibold tracking-wide transition-all duration-300 hover:bg-[#565252] focus:outline-none"
            >
              Reset
            </button>
          </div>
        </div>
      </section>

      <!-- Right: Task Manager -->
      <section>
        <div class="flex flex-col items-center">
          <!-- Section Title -->
          <h2 class="text-3xl font-bold mb-4 text-[#DFDEDE]">Task</h2>

          <!-- Task Input Row -->
          <div
            class="flex flex-col md:flex-row items-stretch md:items-center gap-3 bg-[rgb(59,56,56)] w-full max-w-md p-2 rounded-lg py-3"
          >
            <!-- Task Name Input -->
            <input
              type="text"
              placeholder="Add new task..."
              [(ngModel)]="newTaskName"
              class="w-full md:w-[210px] bg-[#4a4a4a] text-[#DFDEDE] text-sm p-2 rounded-md font-semibold placeholder:text-[#b1afaf] outline-none focus:ring focus:ring-[#888] focus:outline-none"
            />

            <!-- Date Input -->
            <input
              type="date"
              [(ngModel)]="newTaskDueDate"
              class="w-full md:w-[150px] bg-[#4a4a4a] text-[#b1afaf] text-sm p-2 rounded-md font-semibold outline-none focus:ring focus:ring-[#888] focus:outline-none"
            />

            <!-- Add Button -->
            <button
              class="w-full md:w-[100px] py-2 bg-[#4C4848] hover:bg-[#565252] text-[#E0E0E0] text-base rounded-md font-semibold transition"
              (click)="addTask()"
            >
              Add
            </button>
          </div>

          <!-- Task List Placeholder -->

          <div class="mt-3 w-full max-w-md rounded-lg">
            <!-- Scrollable area with fixed size -->
            <div class="h-64 overflow-y-auto flex flex-col gap-3 pr-2">
              <!-- Show "No tasks" message if empty -->
              <p
                *ngIf="tasks.length === 0"
                class="flex justify-center items-center h-full text-center"
              >
                No tasks added yet.
              </p>

              <!-- Show tasks if available -->
              <div
                *ngFor="let task of tasks; index as i"
                class="flex items-center justify-between bg-[#4a4a4a] p-2 rounded-md text-[#DFDEDE]"
              >
                <!-- Left: Checkbox + Info -->
                <div class="flex items-center gap-3 m-1">
                  <input
                    type="checkbox"
                    class="bg-black accent-white transform scale-125 ml-1"
                    [checked]="task.completed"
                    (change)="toggleComplete(i)"
                  />
                  <div class="pl-3">
                    <h3
                      [class.line-through]="task.completed"
                      class="font-semibold"
                    >
                      {{ task.title }}
                    </h3>
                    <p class="text-xs font-medium text-[#9C9898]">
                      Due: {{ task.deadline | date : "mediumDate" }}
                    </p>
                  </div>
                </div>

                <!-- Right: Buttons -->
                <div class="flex gap-2">
                  <button
                    (click)="deleteTask(i)"
                    class="p-2 rounded transition-all duration-200 hover:bg-red-500/20 hover:text-red-400"
                  >
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      fill="none"
                      viewBox="0 0 24 24"
                      stroke-width="1.5"
                      stroke="currentColor"
                      class="w-5 h-5"
                    >
                      <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        d="m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"
                      />
                    </svg>
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>
    </div>
  </div>

  <footer class="mt-10 text-center text-xs text-[#DFDEDE]">
    CREATED BY KYLE MARAVE
  </footer>
</div>
